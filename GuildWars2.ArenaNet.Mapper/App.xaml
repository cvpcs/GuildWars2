<Application x:Class="GuildWars2.ArenaNet.Mapper.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:l="clr-namespace:GuildWars2.ArenaNet.Mapper"
             xmlns:m="clr-namespace:Microsoft.Maps.MapControl.WPF;assembly=Microsoft.Maps.MapControl.WPF"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <Style TargetType="l:PointOfInterestPushpin">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="l:PointOfInterestPushpin">
                        <Grid>
                            <Rectangle Width="{Binding Path=Width, RelativeSource={RelativeSource FindAncestor,AncestorType=m:Pushpin}}"
                                       Height="{Binding Path=Height, RelativeSource={RelativeSource FindAncestor,AncestorType=m:Pushpin}}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="{Binding Path=Image, RelativeSource={RelativeSource FindAncestor,AncestorType=l:PointOfInterestPushpin}}" />
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="l:TaskPushpin">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="l:TaskPushpin">
                        <Grid>
                            <Rectangle Width="{Binding Path=Width, RelativeSource={RelativeSource FindAncestor,AncestorType=m:Pushpin}}"
                                       Height="{Binding Path=Height, RelativeSource={RelativeSource FindAncestor,AncestorType=m:Pushpin}}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="{Binding Path=Image, RelativeSource={RelativeSource FindAncestor,AncestorType=l:TaskPushpin}}" />
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="l:SkillChallengePushpin">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="l:SkillChallengePushpin">
                        <Grid>
                            <Rectangle Width="{Binding Path=Width, RelativeSource={RelativeSource FindAncestor,AncestorType=m:Pushpin}}"
                                       Height="{Binding Path=Height, RelativeSource={RelativeSource FindAncestor,AncestorType=m:Pushpin}}">
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="{Binding Path=Image, RelativeSource={RelativeSource FindAncestor,AncestorType=l:SkillChallengePushpin}}" />
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <ControlTemplate x:Key="PlayerPushpin">
            <Grid>
                <Rectangle Width="32" Height="32">
                    <Rectangle.Fill>
                        <ImageBrush ImageSource="/Resources/player_position.png" />
                    </Rectangle.Fill>
                </Rectangle>
            </Grid>
        </ControlTemplate>
    </Application.Resources>
</Application>
