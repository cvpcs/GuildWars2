<!DOCTYPE html>
<html>
    <head>
        <title>ArenaNet Mapper</title>
        <meta charset="utf-8" />
        <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.5.1/leaflet.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.5.1/leaflet.css" />
        <link rel="stylesheet" href="https://d1h9a8s8eodvjz.cloudfront.net/fonts/menomonia/08-02-12/menomonia.css" />
        <link rel="stylesheet" href="https://d1h9a8s8eodvjz.cloudfront.net/fonts/menomonia/08-02-12/menomonia-italic.css" />
        <style type="text/css">
    		body {
				text-align: center;
				min-width: 500px;
			}

			.leaflet-container {
				background: #000;
			}

            #toggles {
                position: absolute;
                top: 0;
                right: 0;
                text-shadow: 0px 0px 2px black;
                color: white;
                z-index: 2;
            }

			#map {
				position: absolute;
				top: 0;
				right: 0;
				bottom: 0;
				left: 0;
			}
		</style>
        <script>
            var map;
            var supermarker;

            function unproject(coord) {
                return map.unproject(coord, map.getMaxZoom());
            }

            $(function () {
                "use strict";

                var southWest, northEast;

                map = L.map("map", {
                    minZoom: 0,
                    maxZoom: 7,
                    crs: L.CRS.Simple
                }).setView([0, 0], 0);

                southWest = unproject([0, 32768]);
                northEast = unproject([32768, 0]);

                map.setMaxBounds(new L.LatLngBounds(southWest, northEast));

                L.tileLayer("https://tiles.guildwars2.com/1/1/{z}/{x}/{y}.jpg", {
                    minZoom: 0,
                    maxZoom: 7,
                    continuousWorld: true
                }).addTo(map);
                
                var posIcon = L.divIcon({
                    iconSize: [64, 64],
                    iconAnchor: [32, 32],
                    className: 'fancyPlayerPos',
                    html: '<img src="data:image/png;base64,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">'
                });

                var wpImgUri = 'data:image/png;base64,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';
                var wpGroup = L.layerGroup();
                var wpIcon = L.icon({ iconUrl: wpImgUri });
                var wpLegend = '<img class="legend" src="' + wpImgUri + '" /><span class="legend">Points of Interest</span>';

                var poiImgUri = 'data:image/png;base64,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';
                var poiGroup = L.layerGroup();
                var poiIcon = L.icon({ iconUrl: poiImgUri });
                var poiLegend = '<img class="legend" src="' + poiImgUri + '" /><span class="legend">Points of Interest</span>';

                var vistaImgUri = 'data:image/png;base64,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';
                var vistaGroup = L.layerGroup();
                var vistaIcon = L.icon({ iconUrl: vistaImgUri });
                var vistaLegend = '<img class="legend" src="' + vistaImgUri + '" /><span class="legend">Points of Interest</span>';

                var spImgUri = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAArVJREFUeNqslF9IVEEUxr+7SiGUVrgPloUWlfhQRIRkLwsLQVFEL9pDUfiwFwkiCEmREssw+iMWEt2HNN9FEYKKtdRdxcxsF8pLC0UQiBvJuuvuzvXOvTOnB83MdtcNGhgYmPl+c87Md45CRPifw5HNIUVVHymq2pLN2dwsYO2nj1TWxlgSiqoK0rSmjAIiSjvh8dw/9bSTJhcSNMZiVPnwAcHjac6oyQjr7qLAQoJesii9YFEaiEfoYNs9gsdz/Z+A8HhaT3Q9oUljnrwsSu3RMN2am6aeRIT6ot9p3907aaGOFG/WcvJwRf3N6irMEUHnBhgJJKWA34ghoiioqzmHvaUlzYqqNmb8ZUVVm49XHGq8UV2FCAnonIEJiaQQSAqJhJDoT0QwoxAu1pzFjuKtLYqq1v/B+OVDRVULnJs3RQeari3CTANxKRDiBj5xhoiwYa7w7Jn8QuRzgabWNvCODiWlbTbm5QGKAp0xjLF5jLF5MClTuqN7NowrzmLk5DjS+5CIELdtPA5/Q9jiAABn7jpcKCxCXNjonJ0Bp98XSFtkrhTGOcajEUzH4hDMRJ5p43yBE97Xwwi+eYdLW4ogmLk8ybIBylAppmWDmxZEwsB6hwO1pbsxNDIG7/DIWwAbHKSU1x3Yj9tfQosRcnuNWiYCcQsybuDythKMjk/g+ZAvCOAYAFe/d0CfCARxdftOyLgB4hZWh5i7GgjTQsOuPRh/H8Qzn+8DgKOkaZElJ7h6va+GHLYsbygrA0zrr5T/MjZxGxMfp9Dv8+kA3KRpP5b3FtfunsFBfXJKB2WTciAUQv/ISGg1bAU0DMDd5/frgVAoMzBuGOgd9X+WJN1LwtQdStPCkqS7d9Svc8tKDxRSfpVELtK06bX65CKU3JIolO5TOAAXgGlFVbPt+OElzfL4OQAIi/uxSplQBgAAAABJRU5ErkJggg==';
                var spGroup = L.layerGroup();
                var spIcon = L.icon({ iconUrl: spImgUri });
                var spLegend = '<img class="legend" src="' + spImgUri + '" /><span class="legend">Points of Interest</span>';

                var taskImgUri = 'data:image/png;base64,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';
                var taskGroup = L.layerGroup();
                var taskIcon = L.icon({ iconUrl: taskImgUri });
                var taskLegend = '<img class="legend" src="' + taskImgUri + '" /><span class="legend">Renown Hearts</span>';

                var overlayControl = {}
                overlayControl[wpLegend] = wpGroup;
                overlayControl[poiLegend] = poiGroup;
                overlayControl[vistaLegend] = vistaGroup;
                overlayControl[spLegend] = spGroup;
                overlayControl[taskLegend] = taskGroup;

                L.control.layers(null, overlayControl).addTo(map);
                wpGroup.addTo(map);
                poiGroup.addTo(map);
                vistaGroup.addTo(map);
                spGroup.addTo(map);
                taskGroup.addTo(map);

                supermarker = L.marker(unproject([0, 0]), {
                    icon: posIcon
                }).addTo(map);
                
                
                $.get("https://api.guildwars2.com/v1/map_floor.json?continent_id=1&floor=1", function (data) {
                    var region, gameMap, i, il, poi, sp, task;

                    for (region in data.regions) {
                        region = data.regions[region];

                        for (gameMap in region.maps) {
                            gameMap = region.maps[gameMap];

                            for (i = 0, il = gameMap.points_of_interest.length; i < il; i++) {
                                poi = gameMap.points_of_interest[i];

                                switch(poi.type) {
                                    case 'waypoint':
                                        wpGroup.addLayer(L.marker(unproject(poi.coord), {
                                            icon: wpIcon,
                                            title: poi.name
                                        }));
                                        break;
                                    case 'landmark':
                                        poiGroup.addLayer(L.marker(unproject(poi.coord), {
                                            icon: poiIcon,
                                            title: poi.name
                                        }));
                                        break;
                                    case 'vista':
                                        vistaGroup.addLayer(L.marker(unproject(poi.coord), {
                                            icon: vistaIcon,
                                            title: poi.name
                                        }));
                                }
                            }
                            
                            for (i = 0, il = gameMap.skill_challenges.length; i < il; i++) {
                                sp = gameMap.skill_challenges[i];

                                spGroup.addLayer(L.marker(unproject(sp.coord), {
                                    icon: spIcon,
                                }));
                            }

                            for (i = 0, il = gameMap.tasks.length; i < il; i++) {
                                task = gameMap.tasks[i];

                                taskGroup.addLayer(L.marker(unproject(task.coord), {
                                    icon: taskIcon,
                                    title: task.objective + ' (' + task.level + ')'
                                }));
                            }
                        }
                    }
                });
            });

            function updatePlayer(name, x, z, r) {
                supermarker.setLatLng(unproject([x, z]));
                supermarker._icon.title = name;
                supermarker.update();

                $('.fancyPlayerPos img').css({
                    transform: 'scale(' + 1 / 2/*(map.getMaxZoom() - map.getZoom() + 2)*/ + ',' + 1 / 2/*(map.getMaxZoom() - map.getZoom() + 2)*/ + ') rotate(' + r + 'deg)'
                });

                if ($('#toggles #follow').is(':checked'))
                    map.panTo(unproject([x, z]));
            }
		</script>
	</head>
	<body>
        <div id="toggles">
            Follow <input type="checkbox" id="follow" checked="checked" />
        </div>
		<div id="map"></div>
	</body>
</html>

