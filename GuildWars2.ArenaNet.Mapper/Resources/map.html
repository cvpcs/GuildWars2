<!DOCTYPE html>
<html>
    <head>
        <title>ArenaNet Mapper</title>
        <meta charset="utf-8" />
        <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.5.1/leaflet.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.5.1/leaflet.css" />
        <style type="text/css">
    		body {
				text-align: center;
				min-width: 500px;
			}

			.leaflet-container {
				background: #000;
			}

            #toggles {
                position: absolute;
                top: 0;
                right: 0;
                text-shadow: 0px 0px 2px black;
                color: white;
                z-index: 2;
            }

			#map {
				position: absolute;
				top: 0;
				right: 0;
				bottom: 0;
				left: 0;
			}
		</style>
        <script>
            var map;
            var supermarker;

            function unproject(coord) {
                return map.unproject(coord, map.getMaxZoom());
            }

            $(function () {
                "use strict";

                var southWest, northEast;

                map = L.map("map", {
                    minZoom: 0,
                    maxZoom: 7,
                    crs: L.CRS.Simple
                }).setView([0, 0], 0);

                southWest = unproject([0, 32768]);
                northEast = unproject([32768, 0]);

                map.setMaxBounds(new L.LatLngBounds(southWest, northEast));

                L.tileLayer("https://tiles.guildwars2.com/1/1/{z}/{x}/{y}.jpg", {
                    minZoom: 0,
                    maxZoom: 7,
                    continuousWorld: true
                }).addTo(map);
                
                var posIcon = L.divIcon({
                    iconSize: [64, 64],
                    iconAnchor: [32, 32],
                    className: 'fancyPlayerPos',
                    html: '<img src="data:image/png;base64,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">'
                });

                supermarker = L.marker(unproject([0, 0]), {
                    icon: posIcon
                }).addTo(map);
                
                
                $.getJSON("https://api.guildwars2.com/v1/map_floor.json?continent_id=1&floor=1", function (data) {
                    var region, gameMap, i, il, poi;

                    for (region in data.regions) {
                        region = data.regions[region];

                        for (gameMap in region.maps) {
                            gameMap = region.maps[gameMap];

                            for (i = 0, il = gameMap.points_of_interest.length; i < il; i++) {
                                poi = gameMap.points_of_interest[i];

                                if (poi.type != "waypoint") {
                                    continue;
                                }

                                var waypoint = L.icon({
                                    iconUrl: 'data:image/png;base64,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',
                                    iconSize: [20, 20],
                                    iconAnchor: [10, 10],

                                });

                                L.marker(unproject(poi.coord), {
                                    icon: waypoint,
                                    title: poi.name
                                }).addTo(map);
                            }
                        }
                    }
                });
            });

            function updatePlayer(name, x, z, r) {
                supermarker.setLatLng(unproject([x, z]));
                supermarker._icon.title = name;
                supermarker.update();

                $('.fancyPlayerPos img').css({
                    transform: 'scale(' + 1 / 2/*(map.getMaxZoom() - map.getZoom() + 2)*/ + ',' + 1 / 2/*(map.getMaxZoom() - map.getZoom() + 2)*/ + ') rotate(' + r + 'deg)'
                });

                if ($('#toggles #follow').is(':checked'))
                    map.panTo(unproject([x, z]));
            }
		</script>
	</head>
	<body>
        <div id="toggles">
            Follow <input type="checkbox" id="follow" checked="checked" />
        </div>
		<div id="map"></div>
	</body>
</html>

